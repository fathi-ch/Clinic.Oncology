<div fxLayout="column" fxFill style="padding:20px;padding-top: 10px;" fxLayoutGap="8px">
    <div fxFlex="20px" class="titlePage">
        Pateints > Toutes les patients
    </div>

    <div fxFlex="62px" class="gridReserveOptions" fxLayout="row" fxLayoutGap="5px">

     

        <div class="colored box" style="cursor: pointer; flex-direction: row; box-sizing: border-box; display: flex;">
            <!-- search -->
            <div fxflex="60" style="flex: 1 1 100%; box-sizing: border-box; max-width: 80%;">
                <div fxFlex fxLayout="row">


                    

                    <div style="padding-left: 5px;padding-top: 3px;padding-bottom: 4px;">
                        <dx-text-box fxFlex="calc(100% - 350px)" [class]="'textBoxCssClass'" valueChangeEvent="keyup"
                            stylingMode="filled" [placeholder]="'Recherchez nom , prénom ... '" mode="search"
                            [showClearButton]="true">
                        </dx-text-box>

                    </div>
                </div>
            </div>
            <!-- buttons controle -->
            <div style="flex: 1 1 100%; box-sizing: border-box; max-width: 10%;">
         
                <div style="float: left;
                font-size: 14px;
                color: white;
                padding-top: 5px;">

                    <dx-button stylingMode="outlined" text="Nouveau" type="normal" [width]="130" [icon]="'plus'"
                        (click)="newPatientPopUp()"></dx-button>



                </div>
            </div>

            <div style="flex: 1 1 100%; box-sizing: border-box; max-width: 10%;">
                <div style="float: left;
                font-size: 14px;
                color: white;
                padding-top: 5px;">

                    <dx-button stylingMode="outlined" text="Recharger" type="normal" [width]="130" [icon]="'refresh'"
                        (click)="newPatientPopUp()"></dx-button>


                </div>
            </div>

        </div>


    </div>

    <div fxFlex="calc(100% - 180px)">

        <dx-data-grid #dataGrid class="gridContainer" [hoverStateEnabled]="true" [rowAlternationEnabled]="true"
            [showRowLines]="true" noDataText="" [dataSource]="LstPatients" [height]="'auto'" [showBorders]="false"
            dataRowTemplate="dataRowTemplateName">
            <dxi-column caption="id" dataField="id" [visible]="false"></dxi-column>
            <dxi-column [width]="150" caption="Nom" [alignment]="'left'"></dxi-column>
            <dxi-column [width]="150" caption="Prenom" [alignment]="'left'"></dxi-column>
            <dxi-column [width]="100" caption="Sexe" [alignment]="'left'"></dxi-column>
            <dxi-column [width]="80" caption="Age" [alignment]="'left'"></dxi-column>
            <dxi-column [width]="150" caption="Date de naissance" [alignment]="'left'"></dxi-column>
            <dxi-column [width]="150" caption="Prochain RDV" [alignment]="'left'"></dxi-column>
            <dxi-column [width]="150" caption="N° sécurité sociale " [alignment]="'left'"></dxi-column>
            <dxi-column [width]="100" caption="Mobile" [alignment]="'left'"></dxi-column>
            <dxo-load-panel [enabled]="false"></dxo-load-panel>
            <dxo-scrolling mode="infinite"></dxo-scrolling>

            <dxo-paging [pageSize]="10"></dxo-paging>
            <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20, 30]" [showInfo]="false"
                [showNavigationButtons]="true"></dxo-pager>


            <ng-container *dxTemplate="let patient of 'dataRowTemplateName'">
                <tr class="main-row" id="row-{{patient.data.id}}" (click)="this.showRow(patient.data.id)">
                    <td class="rowStyle">{{patient.data.firstName}}</td>
                    <td class="rowStyle">{{patient.data.lastName}}</td>
                    <td class="rowStyle">Male</td>
                    <td class="rowStyle">{{patient.data.age}}</td>
                    <td class="rowStyle">{{convertDate(patient.data.birthDate)}}</td>
                    <td class="rowStyle">{{convertDateWithTime(patient.data.nextAppointment)}}</td>
                    <td sclass="rowStyle"> - </td>
                    <td class="rowStyle"> - </td>
                </tr>
                <tr class="PatientDetail" id="{{patient.data.id}}" style="display: none;">
                    <td colspan="8" tyle="background-color: #00679a !important;">

                        <div>
                            <div class="thing">
                                <div>Nom : <span>{{patient.data.firstName}}</span>, Prénom :
                                    <span>{{patient.data.lastName}}</span></div>
                                <div></div>
                                <div>Age : <span>{{patient.data.age}}</span><span> ans</span></div>
                            </div>

                        </div>


                    </td>

                </tr>

            </ng-container>
        </dx-data-grid>

    </div>


</div>

<!-- new patinet -->

<dx-popup [wrapperAttr]="{ class: 'searchAmorFiltresPopup' }" [width]="970" [height]="'auto'" [showTitle]="true"
    [position]="'center'" [dragEnabled]="false" title="Nouveau Patient" [hideOnOutsideClick]="true"
    [(visible)]="popupVisible">
    <div fxLayout="column" fxFill fxLayoutGap="5px" fxFill>
        <div fxLayout="column" fxLayoutGap="5px" fxFlex="calc(100% - 40px)">
           

           

                <div fxFlex="55" fxLayout="column" fxLayoutGap="5px">
                    <span class="titreCmt">Nom :</span>

                    <dx-text-box [placeholder]="''"    [class]="'defaultTextBoxCssClass'"
                         name="nrsv" text="" value="" mode="text" 
                        [stylingMode]="'outlined'" [showClearButton]="true">
                    </dx-text-box>
                




            </div>
        </div>
    </div>
</dx-popup>